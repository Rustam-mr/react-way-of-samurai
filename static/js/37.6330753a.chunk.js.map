{"version":3,"file":"static/js/37.6330753a.chunk.js","mappings":"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","sources":["webpack://react-1/./src/components/dialogs/style.module.css?5984","webpack://react-1/./src/components/dialogs/dialogItem/style.module.css?8e53","components/dialogs/dialogItem/DialogItem.jsx","webpack://react-1/./src/components/dialogs/message/style.module.css?c005","components/dialogs/message/Message.jsx","webpack://react-1/./src/components/dialogs/addMessageForm/style.module.css?d60c","components/dialogs/addMessageForm/AddMessageForm.jsx","components/dialogs/Dialogs.jsx","hoc/withAuthNavigate.js","components/dialogs/DialogsContainer.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"dialogsWrapper\":\"style_dialogsWrapper__QApCd\",\"dialogsItems\":\"style_dialogsItems__Miwt-\",\"dialogsListHeader\":\"style_dialogsListHeader__nNEIe\",\"messagesArea\":\"style_messagesArea__vytrD\",\"messagesList\":\"style_messagesList__--6ua\",\"messageInputArea\":\"style_messageInputArea__7Ber8\"};","// extracted by mini-css-extract-plugin\nexport default {\"dialogItem\":\"style_dialogItem__e4xI1\",\"activeDialog\":\"style_activeDialog__8SD6u\",\"dialogAvatarPlaceholder\":\"style_dialogAvatarPlaceholder__K4E8g\",\"dialogName\":\"style_dialogName__B5bi+\"};","import { NavLink } from \"react-router-dom\";\r\nimport s from \"./style.module.css\";\r\n// import defaultAvatar from './images/default-avatar.png'; // Убедитесь, что путь правильный\r\n\r\nconst DialogItem = ({id, name}) => {\r\n    let path = \"/dialogs/\" + id;\r\n    \r\n    return (\r\n        // Используем NavLink с пропсом activeClassName для автоматического добавления класса активности\r\n        <NavLink \r\n            to={path} \r\n            className={({ isActive }) => \r\n                isActive ? `${s.dialogItem} ${s.activeDialog}` : s.dialogItem\r\n            }\r\n        >\r\n            {/* Имитация аватара */}\r\n            <div className={s.dialogAvatarPlaceholder}></div>\r\n            \r\n            {/* Имя собеседника */}\r\n            <div className={s.dialogName}>{name}</div>\r\n        </NavLink>\r\n    );\r\n}\r\n\r\nexport default DialogItem;","// extracted by mini-css-extract-plugin\nexport default {\"messagesList\":\"style_messagesList__Wuvgy\",\"messageItem\":\"style_messageItem__LQBPb\",\"ownMessageItem\":\"style_ownMessageItem__X0UaQ\"};","import s from \"./style.module.css\";\r\n\r\nconst Message = ({message, isOwn}) => {\r\n    // debugger\r\n    return (\r\n        // Используем класс messageItem для стилизации пузыря сообщения\r\n        <div className={isOwn ? `${s.ownMessageItem} ${s.messageItem}` : `${s.messageItem}`}>\r\n            {message}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Message;","// extracted by mini-css-extract-plugin\nexport default {\"addMessageForm\":\"style_addMessageForm__rrU+Z\",\"formControl\":\"style_formControl__pjV5E\",\"messageTextarea\":\"style_messageTextarea__k+S0m\",\"error\":\"style_error__myxsq\",\"sendButtonContainer\":\"style_sendButtonContainer__qzCcA\",\"sendButton\":\"style_sendButton__dGizR\"};","import React from 'react'; \r\nimport { useForm } from 'react-hook-form'; \r\nimport { Textarea } from \"../../common/formsControls/FormsControl\";\r\nimport s from './style.module.css'; \r\n\r\nconst AddMessageForm = ({ onSubmit }) => {\r\n    // Деструктурируем register для использования с forwardRef в Textarea\r\n    // Нам все еще нужны errors и touchedFields для логики отключения кнопки, \r\n    // даже если мы не показываем их на экране\r\n    const { register, handleSubmit, formState: { isValid, touchedFields } } = useForm({\r\n        mode: 'onChange' // Валидация при каждом изменении, чтобы isValid обновлялся\r\n    });\r\n\r\n    const { ref: newMessageBodyRef, ...newMessageBodyRest } = register(\"newMessageBody\", { \r\n        required: true, // Сообщение об ошибке не нужно, но правило оставляем\r\n        minLength: {\r\n            value: 1,\r\n            message: \"Сообщение не может быть пустым\" // Сообщение оставляем, оно используется в isValid\r\n        },\r\n        maxLength: {\r\n            value: 20, \r\n            message: \"Максимальная длина 20 символов\" \r\n        }\r\n    });\r\n\r\n    return (\r\n        // Класс добавлен: s.addMessageForm\r\n        <form onSubmit={handleSubmit(onSubmit)} className={s.addMessageForm}>\r\n            {/* Класс добавлен: s.formControl */}\r\n            <div className={s.formControl}>\r\n                <Textarea \r\n                    {...newMessageBodyRest}\r\n                    ref={newMessageBodyRef}\r\n                    placeholder={\"Введите ваше сообщение\"} \r\n                    // Класс добавлен: s.messageTextarea\r\n                    className={s.messageTextarea}\r\n                />\r\n                {/* Элемент ошибки был удален по вашему запросу */}\r\n            </div>\r\n            {/* Класс добавлен: s.sendButtonContainer */}\r\n            <div className={s.sendButtonContainer}>\r\n                {/* \r\n                    Кнопка отключена, если форма невалидна (!isValid) \r\n                    ИЛИ если поле еще не было затронуто пользователем (!touchedFields.newMessageBody)\r\n                */}\r\n                <button \r\n                    type=\"submit\" \r\n                    // Класс добавлен: s.sendButton\r\n                    className={s.sendButton} \r\n                    disabled={!isValid || !touchedFields.newMessageBody}\r\n                >\r\n                    Отправить\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default AddMessageForm;\r\n","import s from \"./style.module.css\";\r\nimport DialogItem from \"./dialogItem/DialogItem\";\r\nimport Message from \"./message/Message\";\r\nimport AddMessageForm from \"./addMessageForm/AddMessageForm\";\r\n\r\nconst Dialogs = ({dialogsPage, sendMessage, authorizedUserId}) => {\r\n  // debugger\r\n  const state = dialogsPage;\r\n  const dialogsElements = state.dialogs.map((d) => (\r\n    <DialogItem key={d.id} name={d.name} id={d.id} />\r\n  ));\r\n\r\n  const messagesElements = state.messages.map((m) => (\r\n    <Message key={m.id} message={m.message} isOwn={m.senderId === authorizedUserId} />\r\n  ));\r\n\r\n  const addNewMessage = (values) => {\r\n    sendMessage(values.newMessageBody);\r\n  };\r\n\r\n  return (\r\n    // Главный контейнер\r\n    <div className={s.dialogsWrapper}>\r\n      {/* Левая колонка: Список диалогов */}\r\n      <div className={s.dialogsItems}>\r\n        <div className={s.dialogsListHeader}>Диалоги</div>\r\n        <div className={s.dialogsList}>{dialogsElements}</div>\r\n      </div>\r\n      \r\n      {/* Правая колонка: Окно сообщений */}\r\n      <div className={s.messagesArea}>\r\n        <div className={s.messagesList}>{messagesElements}</div>\r\n        <div className={s.messageInputArea}>\r\n          <AddMessageForm onSubmit={addNewMessage} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dialogs;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        dialogsPage: state.dialogsPage,\r\n        isAuth: state.auth.isAuth\r\n    };\r\n}\r\n\r\nexport const withAuthNavigate = (Component) => {\r\n    class NavigateComponent extends React.Component {\r\n        render() {\r\n            if (!this.props.isAuth) return <Navigate to={\"/login\"} />\r\n            return <Component {...this.props} />\r\n        }\r\n    }\r\n    \r\n    const ConnectedAuthNavigateComponent = connect(mapStateToProps)(NavigateComponent);\r\n\r\n    return ConnectedAuthNavigateComponent;\r\n}","import { connect } from \"react-redux\";\r\nimport { sendMessageCreator } from \"../../redux/dialogs-reducer\";\r\nimport Dialogs from \"./Dialogs\";\r\nimport { withAuthNavigate } from \"../../hoc/withAuthNavigate\";\r\nimport { compose } from \"redux\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        dialogsPage: state.dialogsPage,\r\n        authorizedUserId: state.auth.userId\r\n    }\r\n}\r\n\r\nlet mapDispatchToProps =(dispatch) => {\r\n    return {\r\n        sendMessage: (newMessageBody) => {\r\n            dispatch(sendMessageCreator(newMessageBody));\r\n        }\r\n    };\r\n}\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, mapDispatchToProps),\r\n    withAuthNavigate\r\n)(Dialogs);\r\n"],"names":["_ref","id","name","path","_jsxs","NavLink","to","className","_ref2","isActive","concat","s","children","_jsx","message","isOwn","onSubmit","register","handleSubmit","formState","isValid","touchedFields","useForm","mode","_register","required","minLength","value","maxLength","ref","newMessageBodyRef","newMessageBodyRest","_objectWithoutProperties","_excluded","Textarea","_objectSpread","placeholder","type","disabled","newMessageBody","dialogsPage","sendMessage","authorizedUserId","state","dialogsElements","dialogs","map","d","DialogItem","messagesElements","messages","m","Message","senderId","dialogsWrapper","dialogsItems","dialogsListHeader","dialogsList","messagesArea","messagesList","messageInputArea","AddMessageForm","values","mapStateToProps","isAuth","auth","compose","connect","userId","dispatch","sendMessageCreator","Component","NavigateComponent","React","render","this","props","Navigate","Dialogs"],"sourceRoot":""}